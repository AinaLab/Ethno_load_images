<!DOCTYPE html>
<html lang="fr">
  <head>
    <script src="https://miro.com/app/static/sdk.1.1.js"></script>
	  
	  
	  <script> 
		  miro.onReady(async() => {
			  alert('ok')
			  		const isAuthorized = await miro.isAuthorized()
					if (!isAuthorized) {
						await miro.requestAuthorization()// Ask the user to authorize the app.
					}
					let widgets = await miro.board.widgets.get();
					stickers = widgets.filter((widget) => widget.y <= -4500);
					for (let n=0; n<stickers.length;n++){
						let sticker = await miro.board.widgets.get({id:stickers[n].id});
						sticker = sticker[0];
						sticker = sticker.plainText;
						let start_url = sticker.search(" url:");
						await miro.board.widgets.create({type:'image',url:sticker.substring(start_url+5), title:sticker.substring(6,start_url), scale:0.15,y:-1500})
						await miro.board.widgets.deleteById(stickers[n].id);
					}
		})
	  </script>
	  
	  

  </head>

</html>
